(function($){'use strict';$(function(){var switcheries=[];$('.js-switchery').each(function(){var name=$(this).attr('id');switcheries[name]=new Switchery(this,{size:'small',color:'#00e640'});});$('[data-toggle="tooltip"]').tooltip({trigger:'hover'});$('.js-calculator-mode').on('change',function(){chmodCalculatorCountMode();chmodCalculatorSetPermissionCheckmarks();});$('.js-calculator-option').on('change',function(){chmodCalculatorSetOptions();chmodCalculatorSetReferencePath();});$('.js-calculator-option-reference-path').on('input',function(){chmodCalculatorSetReferencePath();});chmodCalculatorSetOptions();function chmodCalculatorCountMode(){var octalMode=0;$('.js-calculator-mode').each(function(){if(this.checked){octalMode+=parseInt($(this).val());}});if(octalMode<100){octalMode=0+octalMode.toString();if(octalMode<10){octalMode=0+octalMode.toString();}}
$('.js-calculator-command-octal-mode').text(octalMode);var symbolicMode;if(octalMode==0||octalMode==1000||octalMode==2000||octalMode==3000||octalMode==4000||octalMode==5000||octalMode==6000||octalMode==7000){symbolicMode='a-rwx';}else{symbolicMode='a+rwx';$.each(['u','g','o'],function(index,target){var prefix=','+target+'-',hasPrefix=false,permissionLetter;$('[data-symbolic-mode-target='+target+']').each(function(){if(!this.checked){permissionLetter=$(this).data('symbolic-mode-letter');if(hasPrefix){symbolicMode+=permissionLetter;}else{symbolicMode+=prefix+permissionLetter;hasPrefix=true;}}});});}
if(octalMode>=1000){symbolicMode+=',ug+s,+t';if(!hasSetuid(octalMode)){symbolicMode+=',u-s';}
if(!hasSetgid(octalMode)){symbolicMode+=',g-s';}
if(!hasStickyBit(octalMode)){symbolicMode+=',-t';}}
$('.js-calculator-command-symbolic-mode').text(symbolicMode);var fileListingPresentation='';$.each(['u','g','o'],function(index,targetLetter){$('[data-symbolic-mode-target='+targetLetter+']').each(function(){var permissionLetter=$(this).data('symbolic-mode-letter');if(octalMode>=1000&&'x'===permissionLetter){if('u'===targetLetter&&hasSetuid(octalMode)){if(this.checked){fileListingPresentation+='s';}else{fileListingPresentation+='S';}}else if('g'===targetLetter&&hasSetgid(octalMode)){if(this.checked){fileListingPresentation+='s';}else{fileListingPresentation+='S';}}else if('o'===targetLetter&&hasStickyBit(octalMode)){if(this.checked){fileListingPresentation+='t';}else{fileListingPresentation+='T';}}else{if(this.checked){fileListingPresentation+=permissionLetter;}else{fileListingPresentation+='-';}}}else{if(this.checked){fileListingPresentation+=permissionLetter;}else{fileListingPresentation+='-';}}});});$('.js-calculator-file-listing-presentation').text(fileListingPresentation);var newUrl='/chmod-'+octalMode+'/';history.pushState({},'',newUrl);ga('set',{page:newUrl});ga('send','pageview');}
function hasSetuid(octalMode){return octalMode>=4000;}
function hasSetgid(octalMode){return(octalMode>=2000&&octalMode<4000)||octalMode>=6000;}
function hasStickyBit(octalMode){return(octalMode>=1000&&octalMode<2000)||(octalMode>=3000&&octalMode<4000)||(octalMode>=5000&&octalMode<6000)||octalMode>=7000;}
function chmodCalculatorSetOptions(){var options="";$('.js-calculator-option').each(function(){if(this.checked){options+=$(this).val();if($(this).val()==='--reference'){options+='=<span class="js-calculator-command-reference-path"></span> ';}else{options+=' ';}}});$('.js-calculator-command-options').html(options);if($('.js-calculator-option-recursive').get(0).checked){$('.js-calculator-command-target').text('folder_name');switcheries['calculator-option-preserve-root'].enable();$('label[for="calculator-option-preserve-root"]').removeClass('text-muted');}else{$('.js-calculator-command-target').text('file_name');switcheries['calculator-option-preserve-root'].disable();$('label[for="calculator-option-preserve-root"]').addClass('text-muted');}
if($('.js-calculator-option-reference').get(0).checked){$('.js-calculator-option-reference-path').removeClass('hidden').focus();$('.js-calculator-command-mode').addClass('hidden');}else{$('.js-calculator-option-reference-path').addClass('hidden');$('.js-calculator-command-mode').removeClass('hidden');}}
function chmodCalculatorSetReferencePath(){$('.js-calculator-command-reference-path').text($('.js-calculator-option-reference-path').val());}
function chmodCalculatorSetPermissionCheckmarks(){$('.js-calculator-mode').each(function(){var permissionCheckmark=$(this).data('symbolic-mode-target')+$(this).data('symbolic-mode-letter');if(this.checked){$('.js-calculator-checkmark-'+permissionCheckmark).removeClass('text-danger').addClass('text-success');$('.js-calculator-checkmark-'+permissionCheckmark+' > .fa').removeClass('fa-times').addClass('fa-check');$('.js-calculator-checkmark-'+permissionCheckmark+' > .js-calculator-checkmark-can').text('can');}else{$('.js-calculator-checkmark-'+permissionCheckmark).removeClass('text-success').addClass('text-danger');$('.js-calculator-checkmark-'+permissionCheckmark+' > .fa').removeClass('fa-check').addClass('fa-times');$('.js-calculator-checkmark-'+permissionCheckmark+' > .js-calculator-checkmark-can').text("can't");}});}});})(jQuery);